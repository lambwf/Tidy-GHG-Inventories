"0",""
"0","# Function to fetch and parse the webpage"
"0","fetch_webpage <- function(url) {"
"0","  tryCatch({"
"0","    page <- GET(url)"
"0","    if (status_code(page) == 200) {"
"0","      content <- read_html(page)"
"0","      return(content)"
"0","    } else {"
"0","      stop(""Failed to fetch the webpage. HTTP status code: "", status_code(page))"
"0","    }"
"0","  }, error = function(e) {"
"0","    message(""Error: "", e$message)"
"0","    return(NULL)"
"0","  })"
"0","}"
"0",""
"0","# Function to extract links with title ""CRT"""
"0","extract_crt_links <- function(webpage) {"
"0","  tryCatch({"
"0","    # Select anchor (<a>) elements where title contains ""CRT"""
"0","    elements <- webpage %>%"
"0","      html_elements(""a[title*='CRT']"")  # Matches any <a> tag with 'CRT' in the title"
"0","    "
"0","    # Extract href (link) and title"
"0","    links <- elements %>% html_attr(""href"")"
"0","    titles <- elements %>% html_attr(""title"")"
"0","    "
"0","    if (length(links) == 0) {"
"0","      message(""No CRT links found on the page."")"
"0","      return(NULL)"
"0","    } else {"
"0","      # Prepend the base URL to form complete links"
"0","      base_url <- ""https://unfccc.int"""
"0","      full_links <- sapply(links, function(link) {"
"0","        if (startsWith(link, ""/"")) {"
"0","          paste0(base_url, link)"
"0","        } else {"
"0","          link"
"0","        }"
"0","      })"
"0","      "
"0","      # Extract country names (assume the first word(s) before the first period in the title)"
"0","      country_names <- sapply(titles, function(title) {"
"0","        strsplit(title, ""\\."", fixed = FALSE)[[1]][1]"
"0","      })"
"0","      "
"0","      # Combine country names and links into a data frame"
"0","      result <- data.frame(country = country_names, link = full_links, stringsAsFactors = FALSE)"
"0","      return(result)"
"0","    }"
"0","  }, error = function(e) {"
"0","    message(""Error during link extraction: "", e$message)"
"0","    return(NULL)"
"0","  })"
"0","}"
"0",""
