"0",""
"0",""
"0","colors <- c(""#365f90ff"", ""#4672b3ff"", ""#659cccff"", ""#a3d3f7ff"", ""#6ccac8ff"", ""#e5b82cff"", ""#4f8455ff"", ""#6aad75ff"", ""#818181ff"")"
"0",""
"0","data_plots <- data_crts %>% "
"0","  left_join(.,read.xlsx(""data/cc_inventory_sectors.xlsx"") %>% select(sector_code,sector_tidy)) %>% "
"0","  group_by(country,iso,year,sector_tidy) %>% "
"0","  summarise(value=sum(value,na.rm=T)/1e6)"
"2","Joining with `by = join_by(sector_code)`"
"2","`summarise()` has grouped output by 'country', 'iso', 'year'. You can override using the `.groups` argument."
"0","data_plots <- data_plots %>% "
"0","  mutate(sector_tidy = as.factor(sector_tidy)) %>% "
"0","  mutate(sector_tidy = fct_relevel(sector_tidy,"
"0","                                   ""Energy: Power"","
"0","                                   ""Energy: Industry"","
"0","                                   ""Energy: Transport"","
"0","                                   ""Energy: Buildings & other"","
"0","                                   ""Energy: Fuel production"","
"0","                                   ""Industrial processes"","
"0","                                   ""Agriculture"","
"0","                                   ""Land use change"","
"0","                                   ""Waste""))"
"0",""
"0","countries = unique(data_plots$country)"
"0","for (i in 1:length(countries)) {"
"0","  "
"0","  p <- data_plots %>% "
"0","  filter(country == countries[i]) %>% "
"0","  ggplot(.,aes(x=year,y=value,fill=sector_tidy)) +"
"0","  geom_col(color='#252525',linewidth=0.25) +"
"0","  theme_wl() + "
"0","  scale_fill_manual(values=colors) +"
"0","  scale_x_continuous(limits=c(1990,max(data_plots$year)+1)) +"
"0","  theme(text = element_text(family = ""Liberation Sans""),"
"0","        legend.position=""right"","
"0","        legend.title=element_blank(),"
"0","        axis.title = element_blank(),"
"0","        axis.ticks = element_line(color=""#636363"",size=0.25),"
"0","        panel.grid.major.x = element_blank(),"
"0","        strip.background = element_blank(),"
"0","        strip.text = element_text(size=12,color='#636363',hjust=0,face = ""bold""),"
"0","        panel.border = element_blank(),"
"0","        axis.line = element_line(color=""#636363"",size = 0.25),"
"0","        plot.title = element_text(margin = margin(t = 10)),"
"0","        legend.key.size = unit(0.5, ""cm"")) +"
"0","  labs(title=paste0(countries[i]),"
"0","       subtitle=expression(""Greenhouse gas emissions (MtCO""[2]*""e/yr)""),"
"0","       caption=""âŒ‚ UNFCCC âŒ‚ Tidy GHG inventories"")"
"0",""
"0","  "
"0","  ggsave(paste0(""plots/countries/"",countries[i],"".png""), plot = p, device = ""png"", dpi = 300, width = 8, height = 3.5)"
"0","  #ggsave(paste0(""plots/countries/"",countries[i],"".pdf""), plot = p, device = ""pdf"", width = 8, height = 3.5)"
"0","  ggsave(paste0(""plots/countries/"",countries[i],"".svg""), plot = p, device = ""svg"", width = 8, height = 3.5)"
"0",""
"0","  "
"0","}"
"2","[38;5;232mScale for [32mfill[38;5;232m is already present.
Adding another scale for [32mfill[38;5;232m, which will replace the existing scale.[39m"
"0","p"
