"0",""
"0","## E = A * A/E"
"0","# "
"0","# # select time steps"
"0","# data_decomp <- data_decomp %>%"
"0","#   filter(year %in% c(1990,2022))"
"0","# "
"0","# "
"0","# # calculate logarithmic mean of the emissions change"
"0","# data_decomp <- data_decomp %>%"
"0","#   group_by(iso,sector_lv4) %>%"
"0","#   mutate(w=(last(e_ghg)-first(e_ghg))/(log(last(e_ghg))-log(first(e_ghg))))"
"0","# "
"0","# "
"0","# # calculate activity and intensity effects"
"0","# data_decomp <- data_decomp %>%"
"0","#   group_by(iso,sector_lv4) %>%"
"0","#   mutate(A=w*(log(last(activity)/first(activity)))) %>%"
"0","#   mutate(I=w*(log(last(ef_ghg)/first(ef_ghg)))) %>%"
"0","#   mutate(E=last(e_ghg)-first(e_ghg))"
"0","# "
"0","# blarg <- data_decomp %>%"
"0","#   filter(year==2022) %>%"
"0","#   group_by(iso) %>%"
"0","#   summarise_at(vars(activity,A,I,E),sum,na.rm=T)"
"0",""
"0",""
"0","#select time steps"
"0","data_decomp <- data_decomp %>%"
"0","  filter(year %in% c(1990,2022)) %>%"
"0","  group_by(iso,year) %>%"
"0","  summarise(activity=sum(activity),e_ghg=sum(e_ghg)) %>%"
"0","  mutate(ef_ghg=e_ghg/activity)"
"2","`summarise()` has grouped output by 'iso'. You can override using the `.groups` argument."
"0","# calculate logarithmic mean of the total emissions change"
"0","data_decomp <- data_decomp %>%"
"0","  mutate(w=(last(e_ghg)-first(e_ghg))/(log(last(e_ghg))-log(first(e_ghg))))"
"0",""
"0",""
"0","# calculate activity and intensity effects"
"0","data_decomp <- data_decomp %>%"
"0","  mutate(A=w*(log(last(activity)/first(activity)))) %>%"
"0","  mutate(I=w*(log(last(ef_ghg)/first(ef_ghg)))) %>%"
"0","  group_by(iso) %>%"
"0","  mutate(E=last(e_ghg)-first(e_ghg))"
"0",""
"0",""
"0",""
"0",""
