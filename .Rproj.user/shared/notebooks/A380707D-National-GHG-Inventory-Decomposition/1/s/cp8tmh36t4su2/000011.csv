"0",""
"0",""
"0","#blarg <- data %>% filter(iso==""AUS"") %>% "
"0","#  filter(sector_lv4==""Public electricity and heat production"")"
"0",""
"0",""
"0",""
"0","# Calculate the sum of data values for leaf nodes and compare with parent nodes"
"0",""
"0","# data_sums <- data %>%"
"0","#   filter(iso==""CAN"") %>% "
"0","#   filter(year==""2020"") %>% "
"0","#   filter(fuel==""Total"") %>% "
"0","#   mutate(parent_code = str_replace(category_code, ""\\.[^.]*\\.$"", ""."")) %>%"
"0","#   group_by(parent_code,var) %>%"
"0","#   summarize(parent_value = sum(value), .groups = ""drop"")"
"0","# "
"0","# # Join the parent values back to the original dataset for comparison"
"0","# result <- data %>%"
"0","#   filter(iso==""CAN"") %>% "
"0","#   filter(year==""2020"") %>% "
"0","#   filter(fuel==""Total"") %>% "
"0","#   left_join(data_sums, by = c(""category_code"" = ""parent_code"",""var"" = ""var"")) #%>%"
"0","#   mutate(match_check = ifelse(!is.na(parent_value) & is_leaf, values == parent_value, NA))"
"0",""
"0",""
"0",""
"0",""
"0",""
